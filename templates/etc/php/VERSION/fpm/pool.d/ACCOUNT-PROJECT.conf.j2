[{{ linux_owner }}-{{ project }}]
user = {{ php_service_user }}
group = {{ php_service_user }}
listen = /var/run/php{{ php_version }}-fpm-{{ linux_owner }}-{{ project }}.sock
listen.owner = www-data
listen.group = www-data
;listen.mode = 0660
;listen.allowed_clients = 127.0.0.1

;pm.dynamic: ready for action but uses way more memory -- use for high traffic sites
;pm.ondemand: only runs when needed -- use for dev, staging, low traffic sites
pm = ondemand

pm.max_children = 5
pm.start_servers = 2
pm.min_spare_servers = 1
pm.max_spare_servers = 3
pm.max_requests = 5000
;request_terminate_timeout = 0
catch_workers_output = no
chdir = /
php_admin_flag[log_errors] = on
php_admin_value[error_log] = /var/log/vhosts/{{ linux_owner }}/{{ project }}/php-fpm-error.log
php_admin_value[max_execution_time] = 600
security.limit_extensions = .php
php_admin_value[open_basedir] = "/home/{{ linux_owner }}/www/{{ project }}/:/tmp/"
php_value[newrelic.appname] = "{{ nginx_canonical_name }} ({{ linux_owner }}/{{ project }}) - {{ deploy_env }}"
php_flag[expose_php] = off
